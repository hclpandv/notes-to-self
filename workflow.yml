flowchart:
  description: "ğŸš€ Server Provisioning Workflow"
  steps:
    - key: takeoff
      name: "ğŸ›« Takeoff"
      subtitle: "Init workflow"
      details: |
        Starts the orchestration workflow.

        Runs:
        source UX.sh
        takeoff

        Shows flight-style UX messages.

    - key: health
      name: "ğŸ©º Health Checks"
      subtitle: "All integrations"
      details: |
        Checks all APIs before doing anything:

        - HaloPSA
        - Passwordstate
        - Zabbix
        - IPAM

        Example:
        halopsa_healthy && engine_ok "HaloPSA"

    - key: input
      name: "ğŸ“¥ Get User Input"
      subtitle: "HaloPSA Note"
      details: "Reads YAML from ticket note."

    - key: metadata
      name: "ğŸ§¾ Build Metadata"
      subtitle: "YQ processing"
      details: "Transforms user YAML to tf_input.yml."

    - key: secrets
      name: "ğŸ” Secrets"
      subtitle: "Passwordstate"
      details: "Fetch/create passwords."

    - key: terraform
      name: "âš™ï¸ Terraform"
      subtitle: "Provision server"
      details: "Terraform provisions infra."

    - key: landing
      name: "ğŸ›¬ Landing"
      subtitle: "Finish & report"
      details: "Upload artifacts, close ticket."
